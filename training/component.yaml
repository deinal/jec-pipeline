name: Run weaver
description: A Kubeflow pipeline component for running weaver
metadata:
  labels:
    add-pod-env: 'true'
inputs:
  - name: timestamp
    type: String
outputs:
  - name: output_path
    type: String
  - name: MLPipeline UI metadata
    type: UI metadata
implementation:
  container:
    image: registry.cern.ch/ml/jec-training:latest
    command:
      - python3
      - launch_weaver.py
      - --timestamp
      - inputValue: timestamp
      - --output-path
      - outputPath: output_path
    env:
      KFP_POD_NAME: '{{pod.name}}'
    fileOutputs:
      MLPipeline UI metadata: /mlpipeline-ui-metadata.json
